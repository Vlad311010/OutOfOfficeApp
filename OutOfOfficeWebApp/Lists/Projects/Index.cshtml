@page "/Projects"
@using OutOfOfficeWebApp.Models
@model OutOfOfficeWebApp.Lists.Projects.IndexModel
@{
    ViewData["Title"] = "Projects";
}


@section scripts {
    <script>
        let arrowUp = "<span class='sort-arrow up'></span>"
        let arrowDown = "<span class='sort-arrow down'></span>"
        $(document).ready(function () {
            $('th').click(function () {

                let table = $(this).parents('table').eq(0);
                let rows = table.find('tr:gt(0)').toArray().sort(comparer($(this).index()));
                this.asc = !this.asc;
                if (!this.asc) {
                    rows = rows.reverse();
                }
                for (let i = 0; i < rows.length; i++) {
                    table.append(rows[i]);
                }
            });

            function comparer(index) {
                return function (a, b) {
                    let valA = getCellValue(a, index),
                        valB = getCellValue(b, index);
                    return $.isNumeric(valA) && $.isNumeric(valB) ? valA - valB : valA.localeCompare(valB);
                };
            }

            function getCellValue(row, index) {
                return $(row).children('td').eq(index).text();
            }
        });
    </script>
}
<h3>Projects Page</h3>

@if (Model.Projects == null || Model.Projects.Count() == 0)
{
    <h3>Nothing Here</h3>
}
else 
{
    <div class="container mt-5">
        <table class="table table-bordered table-hover">
            <thead class="thead-dark">
                <tr class="bg-black text-white">
                    <th>ID</th>
                    <th>Type</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                @foreach (Project p in Model.Projects)
                {
                    <tr>
                        <td><a asp-page="/Projects/Details" asp-route-id="@p.ID">@p.ID</a></td>
                        <td><a asp-page="/Projects/Details" asp-route-id="@p.ID">@p.ProjectType</a></td>
                        <td><a asp-page="/Projects/Details" asp-route-id="@p.ID">@p.Status</a></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="form-group py-3">
        <a asp-page="/Projects/Add" class="btn btn-primary w-100">New</a>
    </div>
}






